#!/bin/sh
# Longitudital Feedback on FB04:LG01

caput FBCK:FB04:LG01:STATE 0

# pockcel_perm - 60 Hz (maybe more, maybe less :)
caput -a FBCK:FB04:LG01:POI1 21 0 0 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
#caput -a FBCK:FB04:LG01:POI1 21 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

# F matrix
caput -a FBCK:FB04:LG01:FMATRIX 36 1.046 0 0 0 0 -1.2184 2.1986 0.011464 0 0 0 -0.080912 -0.72954 -0.026117 0 0 0 -0.13831 -0.60952 -0.01451 0.87485 0.037702 0 -9.5878 203.654 0.022006 -0.45644 -0.057178 0 -0.0005691 0.0041105 0 -1.5381 0 2.4

# G matrix
caput -a FBCK:FB04:LG01:GMATRIX 36 1 1 1 1 0.5 1 1 12 12 1 05 1 1 12 12 1 0.5 1 0 0 0 100 0 1 0 0 0 1 1 1 0 0 0 0 0.5 10

# Loop configs
caput FBCK:FB04:LG01:NAME Longitudinal
caput FBCK:FB04:LG01:INSTALLED 1
caput FBCK:FB04:LG01:TOTALPOI 1
caput FBCK:FB04:LG01:ITERATEFUNC Longitudinal

# Measurements
caput FBCK:FB04:LG01:M1DEVNAME BPMS:IN20:731:X
caput FBCK:FB04:LG01:M1USED 1
caput FBCK:FB04:LG01:M1CAMODE 0

caput FBCK:FB04:LG01:M2DEVNAME BPMS:IN20:981:X
caput FBCK:FB04:LG01:M2USED 1
caput FBCK:FB04:LG01:M2CAMODE 0

caput FBCK:FB04:LG01:M3DEVNAME BPMS:LI21:233:X
caput FBCK:FB04:LG01:M3USED 1
caput FBCK:FB04:LG01:M3CAMODE 0

caput FBCK:FB04:LG01:M4DEVNAME BLEN:LI21:265:AIMAXF2
caput FBCK:FB04:LG01:M4USED 1
caput FBCK:FB04:LG01:M4CAMODE 0

caput FBCK:FB04:LG01:M5DEVNAME BPMS:LI24:801:X
caput FBCK:FB04:LG01:M5USED 1
caput FBCK:FB04:LG01:M5CAMODE 0

caput FBCK:FB04:LG01:M6DEVNAME BLEN:LI24:886:BIMAXF2
caput FBCK:FB04:LG01:M6USED 1
caput FBCK:FB04:LG01:M6CAMODE 0

caput FBCK:FB04:LG01:M7DEVNAME BPMS:BSY0:52:X
caput FBCK:FB04:LG01:M7USED 1
caput FBCK:FB04:LG01:M7CAMODE 0

caput FBCK:FB04:LG01:M8DEVNAME BPMS:LTU1:250:X
caput FBCK:FB04:LG01:M8USED 1
caput FBCK:FB04:LG01:M8CAMODE 0

caput FBCK:FB04:LG01:M9DEVNAME BPMS:LTU1:450:X
caput FBCK:FB04:LG01:M9USED 1
caput FBCK:FB04:LG01:M9CAMODE 0

caput FBCK:FB04:LG01:M10DEVNAME ""
caput FBCK:FB04:LG01:M11DEVNAME ""
caput FBCK:FB04:LG01:M12DEVNAME ""
caput FBCK:FB04:LG01:M13DEVNAME ""
caput FBCK:FB04:LG01:M14DEVNAME ""
caput FBCK:FB04:LG01:M15DEVNAME ""
caput FBCK:FB04:LG01:M16DEVNAME ""
caput FBCK:FB04:LG01:M17DEVNAME ""
caput FBCK:FB04:LG01:M18DEVNAME ""
caput FBCK:FB04:LG01:M19DEVNAME ""
caput FBCK:FB04:LG01:M20DEVNAME ""
caput FBCK:FB04:LG01:M21DEVNAME ""
caput FBCK:FB04:LG01:M22DEVNAME ""
caput FBCK:FB04:LG01:M23DEVNAME ""
caput FBCK:FB04:LG01:M24DEVNAME ""
caput FBCK:FB04:LG01:M25DEVNAME ""
caput FBCK:FB04:LG01:M26DEVNAME ""
caput FBCK:FB04:LG01:M27DEVNAME ""
caput FBCK:FB04:LG01:M28DEVNAME ""
caput FBCK:FB04:LG01:M29DEVNAME ""


caput FBCK:FB04:LG01:M10USED 0
caput FBCK:FB04:LG01:M11USED 0
caput FBCK:FB04:LG01:M12USED 0
caput FBCK:FB04:LG01:M13USED 0
caput FBCK:FB04:LG01:M14USED 0
caput FBCK:FB04:LG01:M15USED 0
caput FBCK:FB04:LG01:M16USED 0
caput FBCK:FB04:LG01:M17USED 0
caput FBCK:FB04:LG01:M18USED 0
caput FBCK:FB04:LG01:M19USED 0
caput FBCK:FB04:LG01:M20USED 0
caput FBCK:FB04:LG01:M21USED 0
caput FBCK:FB04:LG01:M22USED 0
caput FBCK:FB04:LG01:M23USED 0
caput FBCK:FB04:LG01:M24USED 0
caput FBCK:FB04:LG01:M25USED 0
caput FBCK:FB04:LG01:M26USED 0
caput FBCK:FB04:LG01:M27USED 0
caput FBCK:FB04:LG01:M28USED 0
caput FBCK:FB04:LG01:M29USED 0
caput FBCK:FB04:LG01:M30USED 0
caput FBCK:FB04:LG01:M31USED 0
caput FBCK:FB04:LG01:M32USED 0
caput FBCK:FB04:LG01:M33USED 0
caput FBCK:FB04:LG01:M34USED 0
caput FBCK:FB04:LG01:M35USED 0
caput FBCK:FB04:LG01:M36USED 0
caput FBCK:FB04:LG01:M37USED 0
caput FBCK:FB04:LG01:M38USED 0
caput FBCK:FB04:LG01:M39USED 0
caput FBCK:FB04:LG01:M40USED 0

# Reference orbit
caput -a FBCK:FB04:LG01:REFORBIT 10 0 0 0 0 0 0 0 0 0 0

# States
caput FBCK:FB04:LG01:S1NAME DL1.Energy
caput FBCK:FB04:LG01:S1USED 1

caput FBCK:FB04:LG01:S2NAME BC1.Energy
caput FBCK:FB04:LG01:S2USED 1

caput FBCK:FB04:LG01:S3NAME BC1.Current
caput FBCK:FB04:LG01:S3USED 1

caput FBCK:FB04:LG01:S4NAME BC2.Energy
caput FBCK:FB04:LG01:S4USED 1

caput FBCK:FB04:LG01:S5NAME BC2.Current
caput FBCK:FB04:LG01:S5USED 1

caput FBCK:FB04:LG01:S6NAME DL2.Energy
caput FBCK:FB04:LG01:S6USED 1

caput FBCK:FB04:LG01:S7USED 0
caput FBCK:FB04:LG01:S8USED 0
caput FBCK:FB04:LG01:S9USED 0
caput FBCK:FB04:LG01:S10USED 0

# Actuators
caput FBCK:FB04:LG01:A1DEVNAME NULL
caput FBCK:FB04:LG01:A1USED 1
caput FBCK:FB04:LG01:A1CAMODE 0
caput FBCK:FB04:LG01:A1.LOLO -100
caput FBCK:FB04:LG01:A1.LOW -99
caput FBCK:FB04:LG01:A1.HIGH 99
caput FBCK:FB04:LG01:A1.HIHI 100
caput FBCK:FB04:LG01:A1LOLO -100
caput FBCK:FB04:LG01:A1LOW -99
caput FBCK:FB04:LG01:A1HIGH 99
caput FBCK:FB04:LG01:A1HIHI 100

caput FBCK:FB04:LG01:A2DEVNAME NULL
caput FBCK:FB04:LG01:A2USED 1
caput FBCK:FB04:LG01:A2CAMODE 0
caput FBCK:FB04:LG01:A2.LOLO -100
caput FBCK:FB04:LG01:A2.LOW -99
caput FBCK:FB04:LG01:A2.HIGH 99
caput FBCK:FB04:LG01:A2.HIHI 100
caput FBCK:FB04:LG01:A2LOLO -100
caput FBCK:FB04:LG01:A2LOW -99
caput FBCK:FB04:LG01:A2HIGH 99
caput FBCK:FB04:LG01:A2HIHI 100

caput FBCK:FB04:LG01:A3DEVNAME NULL
caput FBCK:FB04:LG01:A3USED 1
caput FBCK:FB04:LG01:A3CAMODE 0
caput FBCK:FB04:LG01:A3.LOLO -100
caput FBCK:FB04:LG01:A3.LOW -99
caput FBCK:FB04:LG01:A3.HIGH 99
caput FBCK:FB04:LG01:A3.HIHI 100
caput FBCK:FB04:LG01:A3LOLO -100
caput FBCK:FB04:LG01:A3LOW -99
caput FBCK:FB04:LG01:A3HIGH 99
caput FBCK:FB04:LG01:A3HIHI 100

caput FBCK:FB04:LG01:A4DEVNAME NULL
caput FBCK:FB04:LG01:A4USED 1
caput FBCK:FB04:LG01:A4CAMODE 0
caput FBCK:FB04:LG01:A4.LOLO -100
caput FBCK:FB04:LG01:A4.LOW -99
caput FBCK:FB04:LG01:A4.HIGH 99
caput FBCK:FB04:LG01:A4.HIHI 100
caput FBCK:FB04:LG01:A4LOLO -100
caput FBCK:FB04:LG01:A4LOW -99
caput FBCK:FB04:LG01:A4HIGH 99
caput FBCK:FB04:LG01:A4HIHI 100

caput FBCK:FB04:LG01:A5DEVNAME NULL
caput FBCK:FB04:LG01:A5USED 1
caput FBCK:FB04:LG01:A5CAMODE 0
caput FBCK:FB04:LG01:A5.LOLO -100
caput FBCK:FB04:LG01:A5.LOW -99
caput FBCK:FB04:LG01:A5.HIGH 99
caput FBCK:FB04:LG01:A5.HIHI 100
caput FBCK:FB04:LG01:A5LOLO -100
caput FBCK:FB04:LG01:A5LOW -99
caput FBCK:FB04:LG01:A5HIGH 99
caput FBCK:FB04:LG01:A5HIHI 100

caput FBCK:FB04:LG01:A6DEVNAME NULL
caput FBCK:FB04:LG01:A6USED 1
caput FBCK:FB04:LG01:A6CAMODE 0
caput FBCK:FB04:LG01:A6.LOLO -100
caput FBCK:FB04:LG01:A6.LOW -99
caput FBCK:FB04:LG01:A6.HIGH 99
caput FBCK:FB04:LG01:A6.HIHI 100
caput FBCK:FB04:LG01:A6LOLO -100
caput FBCK:FB04:LG01:A6LOW -99
caput FBCK:FB04:LG01:A6HIGH 99
caput FBCK:FB04:LG01:A6HIHI 100

caput FBCK:FB04:LG01:A7CAMODE 0
caput FBCK:FB04:LG01:A8CAMODE 0
caput FBCK:FB04:LG01:A9CAMODE 0
caput FBCK:FB04:LG01:A10CAMODE 0

# Energy
caput -a FBCK:FB04:LG01:ACTENERGY 6 4.3 4.3 4.3 4.3 4.3 4.3

# Must set these up in order to have the config app work
caput FBCK:FB04:LG01:MEASNUM 9
caput FBCK:FB04:LG01:ACTNUM 4
caput FBCK:FB04:LG01:STATENUM 4

caput FBCK:FB04:LG01:PGAIN 0.001
caput FBCK:FB04:LG01:IGAIN 0.4
caput -a FBCK:FB04:LG01:MEASDSPR 9 -262.791 1 -248.2661 -15.834 -361.442 -2.101 1 130.24 -109.357

# Enable loop
caput FBCK:FB04:LG01:INSTALLED 1
####caput FBCK:FB04:LG01:STATE 1

# Save the configuration
caput FBCK:FB04:LG01:SAVE 0
caput FBCK:FB04:LG01:SAVE 1
